# Модель прецедентів


### Загальна Діаграма прецедентів

@startuml
actor Адміністратор
actor Експерт
actor Система

usecase "Створення опитування" as SurveyCreation
usecase "Редагування опитування" as SurveyEditing
usecase "Перегляд результатів опитування" as SurveyResultsReview
usecase "Проходження опитування" as SurveyCompletionProcess
usecase "Оцінка опитування" as SurveyReviewByExpertProcess
usecase "Реєстрація користувача на платформі" as UserRegistration

Адміністратор --> Система : "Авторизація"
Адміністратор --> SurveyCreation : "Створення опитування"
Адміністратор --> SurveyEditing : "Редагування опитування"
Адміністратор --> SurveyResultsReview : "Перегляд результатів"

Експерт --> Система : "Авторизація"
Експерт --> SurveyCompletionProcess : "Проходження опитування"
Експерт --> SurveyReviewByExpertProcess : "Оцінка опитування"

Система --> UserRegistration : "Реєстрація користувачів"
Система --> SurveyCreation : "Збереження опитування"
Система --> SurveyEditing : "Зберігання змін"
Система --> SurveyResultsReview : "Генерація звітів"
Система --> SurveyCompletionProcess : "Збереження відповідей"
Система --> SurveyReviewByExpertProcess : "Збереження відгуків"

@enduml

**Діаграма прецедентів адміністратора**

@startuml

    actor "Адміністратор" as Admin
'----------------------------------------------------------------
    'Проходження опитувань
    usecase completing_surveys as "Брати участь в опитуваннях" <<Completing surveys>> #EA9058
    usecase take_survey as "Пройти опитування" <<Take survey>> #FFFFFF
    usecase see_results as "Подивитись результати" <<See results>> #FFFFFF


    'Керування анкетами опитуваннь
    usecase manage_surveys as "Керування опитуваннями" <<Manage surveys>> #DD8EF6
    usecase create_new_survey as "Створити нове опитування" <<Create new survey>> #FFFFFF
    usecase delete_survey as "Видалити опитування" <<Delete survey>> #FFFFFF
    usecase edit_survey as "Редагувати опитування" <<Edit survey>> #FFFFFF
    usecase see_survey_results as "Подивитись результати\nопитування користувача" <<See survey results>> #FFFFFF
    usecase share_survey_link as "Відправити посилання\nна опитування" <<Share survey`s link>> #FFFFFF

    'керування обліковими записом
    usecase account_management as "Керування обліковими записами" <<Account Management>> #C7F151
    usecase registration as "Реєстрація нового\nоблікового запису" <<Registration>> #FFFFFF
    usecase authorization as "Авторізація за наявним\nобліковим записом" <<Authorization>> #FFFFFF

'----------------------------------------------------------------
    Admin -right-> completing_surveys
    Admin -down-> manage_surveys
    Admin -left-> account_management

    completing_surveys <.-up- take_survey: extend
    completing_surveys <.-up- see_results: extend


    manage_surveys <.-down- create_new_survey: extend
    manage_surveys <.-down- delete_survey: extend
    manage_surveys <.-down- edit_survey: extend
    manage_surveys <.-down- share_survey_link: extend
    manage_surveys <.-down- see_survey_results: extend

    account_management <.-up- registration: extend
    account_management <.-up- authorization: extend

@enduml


**Діаграма прецедентів користувача**

@startuml

    actor "User" as User
'----------------------------------------------------------------
    'Проходження опитувань
    usecase completing_surveys as "Брати участь в опитуваннях" <<Completing surveys>> #EA9058
    usecase take_survey as "Пройти опитування" <<Take survey>> #FFFFFF
    usecase see_results as "Подивитись результати" <<See results>> #FFFFFF


    'керування обліковим записом
    usecase account_management as "Керування обліковим записом" <<Account Management>> #C7F151
    usecase registration as "Реєстрація нового\nоблікового запису" <<Registration>> #FFFFFF
    usecase authorization as "Авторізація за наявним\nобліковим записом" <<Authorization>> #FFFFFF

'----------------------------------------------------------------
    User -down-> completing_surveys
    User -up-> account_management

    completing_surveys <.-down- take_survey: extend
    completing_surveys <.-down- see_results: extend

    account_management <.-up- registration: extend
    account_management <.-up- authorization: extend

@enduml
### Редагування опитування

| **ID**             | SurveyEditing                      |
|--------------------|------------------------------------|
| **Назва**          | Редагування опитування             |
| **Учасники**       | Адміністратор, Система             |
| **Передумови**     | Існуюче опитування, яке ще не завершено. |
| **Результат**      | Опитування відредаговане, зміни збережено. |
| **Виключні ситуації** | Опитування вже запущено або завершено, адміністратор не має прав на редагування. |
| **Основний сценарій** | 1. Адміністратор вибирає опитування для редагування. <br> 2. Вносить зміни до деталей або питань. <br> 3. Зберігає зміни. <br> 4. Система оновлює опитування. |

<center>

@startuml
|Адміністратор|
    start;

    :Вибирає опитування для редагування;

|Система|
    :Перевіряє, чи опитування доступне для редагування;
    note right #ffaaaa
        <b> Виникає
        <b> AccessDeniedError
        <b> SurveyAlreadyLaunchedError
    end note

|Адміністратор|
    :Вносить зміни до деталей або питань;
    :Зберігає зміни;

|Система|
    :Оновлює опитування;

|Адміністратор|
    stop;
@enduml


**Діаграма редагування опитування**

</center>

### Оцінка опитування

| **ID**             | SurveyReviewByExpertProcess        |
|--------------------|------------------------------------|
| **Назва**          | Оцінка опитування                  |
| **Учасники**       | Користувач (експерт), Система      |
| **Передумови**     | Користувач завершив опитування та авторизований. |
| **Результат**      | Відгук збережено та доступний адміністратору. |
| **Виключні ситуації** | Відгук не збережено через технічні проблеми, користувач не має прав залишити відгук. |
| **Основний сценарій** | 1. Користувач завершує опитування. <br> 2. Залишає відгук та оцінку. <br> 3. Система зберігає відгук. <br> 4. Адміністратор може переглядати відгуки. |

<center>

@startuml
|Користувач (Експерт)|
    start;

    :Завершує опитування;
    :Залишає відгук та оцінку;

|Система|
    :Зберігає відгук;
    note right #ffaaaa
        <b> Виникає
        <b> ReviewSaveError
        <b> TechnicalError
    end note

|Система|
    :Відгук доступний адміністратору для перегляду;

|Користувач (Експерт)|
    stop;
@enduml

**Діаграма оцінки опитування**

</center>

### Створення опитування

| **ID**             | SurveyCreation                     |
|--------------------|------------------------------------|
| **Назва**          | Створення опитування               |
| **Учасники**       | Адміністратор, Система             |
| **Передумови**     | Адміністратор авторизований на платформі та має права для створення опитування. |
| **Результат**      | Створене нове опитування з доданими питаннями. |
| **Виключні ситуації** | Недостатньо прав для створення опитування, відсутні необхідні дані (назва, опис тощо). |
| **Основний сценарій** | 1. Адміністратор входить на платформу. <br> 2. Вибирає опцію створення нового опитування. <br> 3. Вводить назву, опис та додає питання. <br> 4. Зберігає опитування. <br> 5. Опитування стає доступним для експертів. |

@startuml
|Адміністратор|
     start;
     
  :Входить в систему;
  :Обирає опцію\n"Створення опитування";
       
  |Система|
  :Перевіряє права користувача;
  note right #ffaaaa
     <b> Raises
     <b> AccessDeniedError
  end note
       
  |Адміністратор|
  :Заповнює заголовок, короткий опис;
  :Додає питання, що належать опитуваню;
  :Натискає кнопку\n"Зберегти";
       
|Система|
  :Перевіряє дані на валідність;
  note right #ffaaaa
     <b> Raises
     <b> ForbiddenSymbolsError
     <b> NotAllMandatoryFieldsFilledError
  end note

|Система|
    :Перевіряє, чи унікальне опитування;
    note right #ffaaaa
       <b> Raises
       <b> SurveyAlreadyExistsError
    end note
    :Створює нове опитування;
    
  |Адміністратор|
        stop;    
@enduml

**Діаграма створення опитування**

### Реєстреція експерта на платформі

| **ID**             | UserRegistration                   |
|--------------------|------------------------------------|
| **Назва**          | Реєстрація експерта на платформі   |
| **Учасники**       | Користувач (експерт), Система      |
| **Передумови**     | Користувач не має акаунту на платформі. |
| **Результат**      | Створено акаунт експерта з підтвердженою електронною адресою та спеціалізацією. |
| **Виключні ситуації** | Неправильна або вже зареєстрована електронна адреса, помилки у формі. |
| **Основний сценарій** | 1. Користувач заповнює реєстраційну форму. <br> 2. Підтверджує email через посилання. <br> 3. Отримує доступ до платформи. |

@startuml
|Користувач|
     start;
     
  :Натискає кнопку\n"Sign up" в головному\nменю;

  |Система|
  :Відкриває форму реєстрації;
  
  |Користувач|
  :Заповнює обовʼязкові поля;
  :Натискає кнопку\n"Sign up" на формі\nреєстрації;
       
  |Система|
  :Перевіряє дані на валідність;
  note right #ffaaaa
     <b> Raises
     <b> ForbiddenSymbolsError
     <b> NotAllMandatoryFieldsFilledError
  end note
  :Перевіряє обліковий запис\nна унікальність;
  note right #ffaaaa
     <b> Raises
     <b> AccountAlreadyExistsError
  end note
  :Надсилає email - підтвердження реєстрації;
       
  |Користувач|
  :Відкриває отриманий лист\nна електронній пошті;
  :Натискає кнопку\n"Submit email";

  |Система|
  :Отримує запит про\nпідтвердження email;
  :Маркує користувача, як підтвердженного;
    
  |Користувач|
  :Отримує доступ до платформи;

        stop;    
@enduml

**Діаграма реєстрація експерта на платформі**
### Проходження опитування

| **ID**             | SurveyCompletionProcess            |
|--------------------|------------------------------------|
| **Назва**          | Проходження опитування             |
| **Учасники**       | Користувач (експерт), Система      |
| **Передумови**     | Є активне опитування, експерт зареєстрований або анонімний. |
| **Результат**      | Відповіді збережено в системі.     |
| **Виключні ситуації** | Відсутній доступ до опитування, технічні проблеми з поданням. |
| **Основний сценарій** | 1. Користувач відкриває опитування. <br> 2. Відповідає на питання. <br> 3. Система зберігає відповіді. <br> 4. Після завершення користувач подає відповіді. |

@startuml

|Користувач (Експерт)|
start
: Користувач відкриває опитування;
: Користувач відповідає на питання;

note left #ffaaaa
    <b>Можлива виключна ситуація:</b>
    <b>Відсутній доступ до опитування</b>
    <b>(AccessDeniedException)</b>
end note

|Система|
: Система отримує відповіді користувача;
: Система перевіряє наявність технічних проблем;

note right #ffaaaa
    <b>Можлива виключна ситуація:</b>
    <b>Технічні проблеми з поданням</b>
    <b>(SubmissionFailedException)</b>
end note

: Система зберігає відповіді користувача;
: Система завершує опитування;

|Користувач (Експерт)|
: Користувач отримує повідомлення про успішне подання відповідей;

stop

@enduml

**Діаграма проходження опитування**
### Перегляд результатів опитування

| **ID**             | SurveyResultsReview                |
|--------------------|------------------------------------|
| **Назва**          | Перегляд результатів опитування    |
| **Учасники**       | Адміністратор, Експерт             |
| **Передумови**     | Опитування завершено з достатньою кількістю відповідей. |
| **Результат**      | Згенеровано звіт з результатами.   |
| **Виключні ситуації** | Відсутні відповіді для аналізу, технічні проблеми з відображенням результатів. |
| **Основний сценарій** | 1. Система агрегує відповіді. <br> 2. Генерується звіт. 3. Користувач обирає спосіб отримання результату (завантажити pdf/надіслати на пошту). <br> 4. Результат надходить до користувача. <br><br> *Адміністратор може переглянути звіт у адмін-панелі.|

@startuml

|Система|
start
: Система агрегує відповіді;
: Система генерує звіт з результатами;

note right #ffaaaa
    <b>Можлива виключна ситуація:</b>
    <b>Відсутні відповіді для аналізу</b>
    <b>(NoDataForAnalysisException)</b>
end note

note right #ffaaaa
    <b>Можлива виключна ситуація:</b>
    <b>Технічні проблеми з відображенням результатів</b>
    <b>(DisplayErrorException)</b>
end note

|Користувач (Експерт)|
: Користувач обирає спосіб отримання результату;
: Користувач завантажує звіт (PDF) або надсилає на пошту;

|Система|
: Система надсилає результати користувачу;

stop

@enduml

**Діаграма перегляду результатів опитування**
